<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Detective Academy üïµÔ∏è - Master AI Literacy</title>
    <link rel="stylesheet" href="styles/shared.css">
    <script defer src="scripts/nav.js"></script>
    <script defer src="scripts/shared.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #00D9FF;
            --secondary: #9D4EDD;
            --success: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
            --dark: #1F2937;
            --light: #F3F4F6;
            --gold: #FFD700;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }

        .game-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Game Header */
        .game-header {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px 30px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .logo {
            font-size: 28px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stats-bar {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.8;
            text-transform: uppercase;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .xp-bar {
            width: 250px;
            height: 24px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .xp-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--gold), var(--warning));
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
        }

        /* Main Game Area */
        .game-content {
            display: grid;
            grid-template-columns: 250px 1fr 300px;
            gap: 20px;
        }

        @media (max-width: 1200px) {
            .game-content {
                grid-template-columns: 1fr;
            }
        }

        /* Sidebar */
        .sidebar {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
        }

        .sidebar h3 {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .level-badge {
            background: linear-gradient(135deg, var(--gold), var(--warning));
            padding: 10px 20px;
            border-radius: 50px;
            text-align: center;
            margin-bottom: 20px;
            font-size: 18px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
        }

        .badge-collection {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .badge {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .badge.unlocked {
            background: linear-gradient(135deg, var(--gold), var(--warning));
            animation: pulse 2s infinite;
        }

        .badge.locked {
            opacity: 0.3;
            filter: grayscale(100%);
        }

        /* Main Game Panel */
        .main-panel {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
        }

        .game-modes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .mode-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .mode-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: 0 10px 30px rgba(0, 217, 255, 0.3);
        }

        .mode-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .mode-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .mode-desc {
            font-size: 14px;
            opacity: 0.8;
            margin-bottom: 15px;
        }

        .mode-reward {
            background: rgba(255, 215, 0, 0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            display: inline-block;
        }

        /* Challenge Section */
        .challenge-active {
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.2), rgba(157, 78, 221, 0.2));
            border: 2px solid var(--primary);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
        }

        .challenge-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .challenge-timer {
            font-size: 24px;
            font-weight: bold;
            color: var(--warning);
        }

        .question-box {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 20px;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .options-grid {
            display: grid;
            gap: 15px;
        }

        .option-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: 20px;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }

        .option-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: var(--primary);
            transform: translateX(5px);
        }

        .option-btn.correct {
            background: var(--success);
            border-color: var(--success);
            animation: correctAnswer 0.5s;
        }

        .option-btn.incorrect {
            background: var(--danger);
            border-color: var(--danger);
            animation: shake 0.5s;
        }

        .option-btn.disabled {
            pointer-events: none;
            opacity: 0.5;
        }

        /* Achievements Panel */
        .achievements-panel {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
        }

        .achievement-item {
            background: rgba(255, 255, 255, 0.1);
            border-left: 4px solid var(--primary);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .achievement-item.completed {
            border-left-color: var(--gold);
            background: linear-gradient(90deg, rgba(255, 215, 0, 0.2), transparent);
        }

        .achievement-title {
            font-weight: bold;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .achievement-progress {
            font-size: 12px;
            opacity: 0.8;
        }

        .progress-bar-mini {
            height: 6px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 3px;
            margin-top: 8px;
            overflow: hidden;
        }

        .progress-fill-mini {
            height: 100%;
            background: var(--primary);
            transition: width 0.5s;
        }

        /* Leaderboard */
        .leaderboard {
            margin-top: 20px;
        }

        .leaderboard-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .rank {
            font-size: 20px;
            font-weight: bold;
            width: 30px;
        }

        .rank.gold { color: var(--gold); }
        .rank.silver { color: #C0C0C0; }
        .rank.bronze { color: #CD7F32; }

        /* Animations */
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes correctAnswer {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid var(--success);
            border-radius: 15px;
            padding: 20px;
            min-width: 300px;
            animation: slideIn 0.5s;
            z-index: 1000;
        }

        .notification.hidden {
            display: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 12px;
            padding: 15px 30px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 217, 255, 0.4);
        }

        .scenario-card {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
        }

        .scenario-text {
            font-style: italic;
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .pathology-tag {
            display: inline-block;
            background: var(--danger);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            margin: 5px;
        }

        .next-lesson-cta {
            margin: 40px 0;
            padding: 28px;
            border-radius: 20px;
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(255, 255, 255, 0.2);
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 20px;
        }

        .next-lesson-copy {
            flex: 1;
        }

        .next-lesson-label {
            text-transform: uppercase;
            letter-spacing: 0.08em;
            font-size: 13px;
            color: rgba(255, 255, 255, 0.8);
        }

        .next-lesson-cta h2 {
            margin: 8px 0;
            font-size: 28px;
        }

        @media (max-width: 640px) {
            .next-lesson-cta {
                flex-direction: column;
                text-align: center;
            }
            .next-lesson-cta .btn-primary {
                width: 100%;
            }
        }
    </style>
</head>
<body data-lesson-id="lesson2-game">
    <div class="game-container">
        <!-- Header -->
        <div class="game-header">
            <div class="logo">
                üïµÔ∏è AI Detective Academy
                <div style="font-size: 12px; opacity: 0.7; margin-top: 5px;">
                    <a href="index.html" style="color: white; text-decoration: none;">üè† Home</a> / 
                    <a href="presentation.html" style="color: white; text-decoration: none;">Presentation</a> / 
                    <span style="color: #FFD700;">Game Mode</span>
                </div>
            </div>
            <div class="stats-bar">
                <div class="stat">
                    <div class="stat-label">Level</div>
                    <div class="stat-value" id="level">1</div>
                </div>
                <div class="stat">
                    <div class="stat-label">XP</div>
                    <div class="xp-bar">
                        <div class="xp-fill" id="xpBar" style="width: 0%;">
                            <span id="xpText">0/100</span>
                        </div>
                    </div>
                </div>
                <div class="stat">
                    <div class="stat-label">Points</div>
                    <div class="stat-value">
                        <span id="points">0</span> üèÜ
                    </div>
                </div>
                <div class="stat">
                    <div class="stat-label">Streak</div>
                    <div class="stat-value">
                        <span id="streak">0</span> üî•
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="game-content">
            <!-- Left Sidebar -->
            <div class="sidebar">
                <div class="level-badge">
                    <div style="font-size: 14px; opacity: 0.8;">Detective Rank</div>
                    <div id="rankTitle">Rookie</div>
                </div>
                
                <h3>üèÖ Badges</h3>
                <div class="badge-collection">
                    <div class="badge unlocked" title="First Steps">üéØ</div>
                    <div class="badge locked" title="Hallucination Hunter">üëª</div>
                    <div class="badge locked" title="Bias Buster">‚öñÔ∏è</div>
                    <div class="badge locked" title="Master Detective">üéì</div>
                    <div class="badge locked" title="Perfect Streak">üî•</div>
                    <div class="badge locked" title="Speed Demon">‚ö°</div>
                </div>
            </div>

            <!-- Main Panel -->
            <div class="main-panel">
                <div id="welcomeScreen">
                    <h1 style="margin-bottom: 20px; font-size: 36px;">üéÆ Welcome to AI Detective Academy!</h1>
                    <p style="font-size: 18px; margin-bottom: 30px; opacity: 0.9;">Master the art of spotting AI's tricks, lies, and biases. Choose your training mode:</p>
                    
                    <div class="game-modes">
                        <div class="mode-card" onclick="startMode('scenarios')">
                            <div class="mode-icon">üé≠</div>
                            <div class="mode-title">Scenario Detective</div>
                            <div class="mode-desc">Read AI outputs and identify the pathology</div>
                            <div class="mode-reward">+50 XP per correct answer</div>
                        </div>
                        
                        <div class="mode-card" onclick="startMode('quiz')">
                            <div class="mode-icon">‚ö°</div>
                            <div class="mode-title">Speed Quiz</div>
                            <div class="mode-desc">Test your knowledge under time pressure</div>
                            <div class="mode-reward">+100 XP with bonus multiplier</div>
                        </div>
                        
                        <div class="mode-card" onclick="startMode('facts')">
                            <div class="mode-icon">‚úÖ</div>
                            <div class="mode-title">F.A.C.T.S. Training</div>
                            <div class="mode-desc">Learn the verification framework</div>
                            <div class="mode-reward">+75 XP + Certification</div>
                        </div>
                        
                        <div class="mode-card" onclick="startMode('realworld')">
                            <div class="mode-icon">üí•</div>
                            <div class="mode-title">Real Disasters</div>
                            <div class="mode-desc">Learn from actual AI failures</div>
                            <div class="mode-reward">+150 XP + Case Studies</div>
                        </div>
                    </div>

                    <div style="margin-top: 40px; padding: 30px; background: rgba(0, 217, 255, 0.1); border-radius: 20px; border: 2px solid var(--primary);">
                        <h3 style="margin-bottom: 15px;">üìö What You'll Master:</h3>
                        <ul style="list-style: none; padding: 0;">
                            <li style="padding: 10px 0; display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 24px;">üß†</span>
                                <span>32 Machine Pathologies (how AI breaks)</span>
                            </li>
                            <li style="padding: 10px 0; display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 24px;">‚è∞</span>
                                <span>Knowledge Cutoffs (GPT-5: Oct 2025, Claude 3.7: Nov 2025)</span>
                            </li>
                            <li style="padding: 10px 0; display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 24px;">ü™ô</span>
                                <span>Token Limits & Context Windows</span>
                            </li>
                            <li style="padding: 10px 0; display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 24px;">üõ°Ô∏è</span>
                                <span>F.A.C.T.S. Verification Framework</span>
                            </li>
                            <li style="padding: 10px 0; display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 24px;">‚öñÔ∏è</span>
                                <span>Detecting Bias & Discrimination</span>
                            </li>
                        </ul>
                    </div>
                    
                    <div style="margin-top: 30px; text-align: center;">
                        <button onclick="window.location.href='index.html'" style="padding: 16px 32px; background: rgba(0,0,0,0.3); color: white; border: 2px solid rgba(255,255,255,0.3); border-radius: 12px; font-size: 16px; font-weight: bold; cursor: pointer; transition: all 0.2s;">
                            ‚Üê Back to Main Menu
                        </button>
                    </div>
                </div>

                <div id="gameArea" style="display: none;">
                    <!-- Game content will be dynamically loaded here -->
                </div>
            </div>

            <!-- Right Panel -->
            <div class="achievements-panel">
                <h3 style="margin-bottom: 15px;">üéØ Daily Missions</h3>
                
                <div class="achievement-item completed">
                    <div class="achievement-title">
                        ‚úÖ First Login
                    </div>
                    <div class="achievement-progress">Complete</div>
                </div>
                
                <div class="achievement-item">
                    <div class="achievement-title">
                        Spot 5 Hallucinations
                    </div>
                    <div class="achievement-progress">2/5 completed</div>
                    <div class="progress-bar-mini">
                        <div class="progress-fill-mini" style="width: 40%;"></div>
                    </div>
                </div>
                
                <div class="achievement-item">
                    <div class="achievement-title">
                        Complete Speed Quiz
                    </div>
                    <div class="achievement-progress">0/1 completed</div>
                    <div class="progress-bar-mini">
                        <div class="progress-fill-mini" style="width: 0%;"></div>
                    </div>
                </div>
                
                <div class="achievement-item">
                    <div class="achievement-title">
                        Learn F.A.C.T.S. Framework
                    </div>
                    <div class="achievement-progress">0/1 completed</div>
                    <div class="progress-bar-mini">
                        <div class="progress-fill-mini" style="width: 0%;"></div>
                    </div>
                </div>

                <div class="leaderboard">
                    <h3 style="margin-bottom: 15px;">üèÜ Top Detectives</h3>
                    <div class="leaderboard-item">
                        <div class="rank gold">#1</div>
                        <div>
                            <div style="font-weight: bold;">AIHunter2025</div>
                            <div style="font-size: 12px; opacity: 0.7;">3,450 XP</div>
                        </div>
                    </div>
                    <div class="leaderboard-item">
                        <div class="rank silver">#2</div>
                        <div>
                            <div style="font-weight: bold;">BiasSlayer</div>
                            <div style="font-size: 12px; opacity: 0.7;">2,890 XP</div>
                        </div>
                    </div>
                    <div class="leaderboard-item">
                        <div class="rank bronze">#3</div>
                        <div>
                            <div style="font-weight: bold;">FactChecker</div>
                            <div style="font-size: 12px; opacity: 0.7;">2,105 XP</div>
                        </div>
                    </div>
                    <div class="leaderboard-item">
                        <div class="rank">#247</div>
                        <div>
                            <div style="font-weight: bold;">You</div>
                            <div style="font-size: 12px; opacity: 0.7;">0 XP</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <section class="next-lesson-cta">
            <div class="next-lesson-copy">
                <p class="next-lesson-label">Next Mission</p>
                <h2>Lesson 3 ¬∑ Content Creation</h2>
                <p>Switch back into Learn Mode to storyboard ethical content systems before your next quiz.</p>
            </div>
            <button class="btn-primary" type="button" data-next-lesson="auto" data-next-label="Go to Lesson 3 ¬∑ Learn Mode">Go to Lesson 3 ¬∑ Learn Mode</button>
        </section>
        <div class="footer-nav"></div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification hidden">
        <div id="notificationContent"></div>
    </div>

    <script>
        // Game State
        const gameState = {
            level: 1,
            xp: 0,
            xpToNextLevel: 100,
            points: 0,
            streak: 0,
            badges: ['first-steps'],
            currentMode: null
        };

        // Scenarios Database
        const scenarios = [
            {
                id: 1,
                text: "You ask GPT-5 about a research paper on quantum computing. It responds: 'According to the 2025 Nature study by Dr. Sarah Martinez titled \"Quantum Coherence in Room Temperature\", the breakthrough achieved 99.7% stability at 23¬∞C.'",
                pathology: "Citation Invention",
                options: [
                    "Citation Invention - AI made up a fake study",
                    "Confabulation - AI filled gaps with plausible details",
                    "Overconfidence - AI is too certain about quantum physics",
                    "This is accurate and verifiable"
                ],
                correct: 0,
                explanation: "This is Citation Invention! The AI created a realistic-sounding academic reference that doesn't exist. Always verify citations, especially specific ones with author names and titles.",
                xp: 50
            },
            {
                id: 2,
                text: "Claude 3.7 tells you: 'I analyzed the latest stock market data from yesterday and recommend buying Tesla stock based on the 12% surge.'",
                pathology: "False Authority + Fabrication",
                options: [
                    "This seems accurate - AI can analyze recent data",
                    "False Authority - AI cannot access real-time market data",
                    "Overconfidence - AI shouldn't give financial advice",
                    "Both B and C are correct"
                ],
                correct: 3,
                explanation: "Correct! Claude 3.7's knowledge cutoff is November 2025. It CANNOT access 'yesterday's data' and shouldn't claim financial authority. Double pathology: False Authority + Fabrication.",
                xp: 75
            },
            {
                id: 3,
                text: "You ask GPT-5 to summarize a 50-page report. It gives a detailed 8-page summary, but you notice it mentions 'Chapter 12' which doesn't exist in your 10-chapter report.",
                pathology: "Confabulation",
                options: [
                    "Context Amnesia - AI forgot the document structure",
                    "Confabulation - AI filled gaps with invented details",
                    "Verbosity - AI used too many words",
                    "This is normal AI behavior"
                ],
                correct: 1,
                explanation: "This is Confabulation! When AI doesn't have complete information, it sometimes 'fills in the blanks' with plausible-sounding but false details. Always cross-check against source material.",
                xp: 50
            },
            {
                id: 4,
                text: "An AI hiring tool consistently ranks candidates named 'John' and 'Michael' higher than equally qualified candidates named 'Jamal' and 'Wei', even with identical resumes.",
                pathology: "Hypernormalization Syndrome",
                options: [
                    "Goal Drift - AI lost sight of qualifications",
                    "Hypernormalization Syndrome - AI learned bias from training data",
                    "Ethical Inconsistency - AI applied different standards",
                    "Both B and C"
                ],
                correct: 3,
                explanation: "Correct! This is both Hypernormalization (accepting biased patterns as 'normal' from training data) and Ethical Inconsistency (applying different standards). Real-world example: Amazon's hiring AI had to be scrapped for this exact issue.",
                xp: 100
            },
            {
                id: 5,
                text: "You're chatting with GPT-5 about cooking. Mid-conversation, you mention your grandmother's recipe, and suddenly the AI starts responding in a childlike voice saying 'Grandma makes the bestest cookies!' in broken English.",
                pathology: "Machine DID",
                options: [
                    "Machine DID - AI switched personalities unexpectedly",
                    "Context Amnesia - AI forgot the conversation topic",
                    "Looping - AI is repeating patterns",
                    "This is normal adaptation to user tone"
                ],
                correct: 0,
                explanation: "This is Machine DID (Dissociative Identity Disorder)! The AI exhibited contradictory personalities without warning. This happens when different training data conflict, causing personality switches.",
                xp: 60
            },
            {
                id: 6,
                text: "You ask Claude 3.7: 'What are the risks of using AI?' It responds with 15 paragraphs, then says 'Let me also explain in another way...' and repeats the same points in slightly different words for another 10 paragraphs.",
                pathology: "Verbosity",
                options: [
                    "Looping - AI is stuck repeating",
                    "Verbosity - AI used way too many words",
                    "Context Amnesia - AI forgot it already answered",
                    "All of the above"
                ],
                correct: 3,
                explanation: "All of the above! This combines Verbosity (excessive wordiness), Looping (repetition), and Context Amnesia (forgetting it already covered this). Pro tip: Use F.A.C.T.S. - 'Try' to encourage concise responses.",
                xp: 80
            }
        ];

        // Quiz Questions
        const quizQuestions = [
            {
                question: "What is GPT-5's knowledge cutoff date?",
                options: ["April 2024", "June 2025", "October 2025", "It has real-time internet access"],
                correct: 2,
                explanation: "GPT-5's knowledge cutoff is October 2025. It doesn't know about events after this date."
            },
            {
                question: "Which pathology means AI makes up fake academic sources?",
                options: ["Fabrication", "Citation Invention", "Confabulation", "False Authority"],
                correct: 1,
                explanation: "Citation Invention is when AI creates fake references, papers, or sources that sound real but don't exist."
            },
            {
                question: "What does the 'C' in F.A.C.T.S. stand for?",
                options: ["Check sources", "Consider gaps", "Compare outputs", "Critique reasoning"],
                correct: 1,
                explanation: "C = Consider missing details, gaps, or one-sided perspectives in AI's response."
            },
            {
                question: "Approximately how many tokens is one page of text?",
                options: ["100 tokens", "400 tokens", "1,000 tokens", "4,000 tokens"],
                correct: 1,
                explanation: "One page of text ‚âà 400 tokens. Understanding token limits helps you know when AI might 'forget' earlier parts of your conversation."
            }
        ];

        // Game Functions
        function addXP(amount) {
            gameState.xp += amount;
            gameState.points += amount;
            
            if (gameState.xp >= gameState.xpToNextLevel) {
                levelUp();
            }
            
            updateUI();
            showNotification(`+${amount} XP! üéâ`, 'success');
        }

        function levelUp() {
            gameState.level++;
            gameState.xp = gameState.xp - gameState.xpToNextLevel;
            gameState.xpToNextLevel = Math.floor(gameState.xpToNextLevel * 1.5);
            
            const ranks = ['Rookie', 'Detective', 'Senior Detective', 'Master Detective', 'AI Guru'];
            const rankIndex = Math.min(gameState.level - 1, ranks.length - 1);
            document.getElementById('rankTitle').textContent = ranks[rankIndex];
            
            showNotification(`üéä Level Up! You're now Level ${gameState.level}!`, 'levelup');
        }

        function updateUI() {
            document.getElementById('level').textContent = gameState.level;
            document.getElementById('points').textContent = gameState.points;
            document.getElementById('streak').textContent = gameState.streak;
            
            const xpPercent = (gameState.xp / gameState.xpToNextLevel) * 100;
            document.getElementById('xpBar').style.width = xpPercent + '%';
            document.getElementById('xpText').textContent = `${gameState.xp}/${gameState.xpToNextLevel}`;
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const content = document.getElementById('notificationContent');
            
            content.innerHTML = `<div style="font-size: 18px; font-weight: bold;">${message}</div>`;
            notification.className = 'notification';
            
            setTimeout(() => {
                notification.classList.add('hidden');
            }, 3000);
        }

        function startMode(mode) {
            gameState.currentMode = mode;
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('gameArea').style.display = 'block';
            
            if (mode === 'scenarios') {
                loadScenario(0);
            } else if (mode === 'quiz') {
                loadQuiz(0);
            } else if (mode === 'facts') {
                loadFACTS();
            } else if (mode === 'realworld') {
                loadRealWorld();
            }
        }

        let currentScenarioIndex = 0;

        function loadScenario(index) {
            if (index >= scenarios.length) {
                showCompletion('scenarios');
                return;
            }
            
            currentScenarioIndex = index;
            const scenario = scenarios[index];
            
            const html = `
                <div class="challenge-active">
                    <div class="challenge-header">
                        <h2>üé≠ Scenario ${index + 1}/${scenarios.length}</h2>
                        <div class="pathology-tag">Identify the Pathology</div>
                    </div>
                    
                    <div class="scenario-card">
                        <div class="scenario-text">"${scenario.text}"</div>
                    </div>
                    
                    <div class="question-box">
                        <div class="question-text">What's wrong with this AI response?</div>
                        <div class="options-grid" id="optionsGrid">
                            ${scenario.options.map((opt, i) => `
                                <button class="option-btn" onclick="checkAnswer(${i}, ${scenario.correct}, ${scenario.xp})">${opt}</button>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div id="feedbackBox" style="display: none; margin-top: 20px; padding: 20px; background: rgba(0,0,0,0.3); border-radius: 15px;">
                        <div id="feedbackText"></div>
                        <button class="btn-primary" style="margin-top: 15px;" onclick="loadScenario(${index + 1})">Next Scenario ‚Üí</button>
                    </div>
                </div>
            `;
            
            document.getElementById('gameArea').innerHTML = html;
        }

        function checkAnswer(selected, correct, xpReward) {
            const options = document.querySelectorAll('.option-btn');
            options.forEach(btn => btn.classList.add('disabled'));
            
            if (selected === correct) {
                options[selected].classList.add('correct');
                gameState.streak++;
                const bonusXP = Math.floor(xpReward * (1 + gameState.streak * 0.1));
                addXP(bonusXP);
                
                document.getElementById('feedbackText').innerHTML = `
                    <div style="color: var(--success); font-size: 24px; margin-bottom: 15px;">‚úÖ Correct!</div>
                    <div style="margin-bottom: 10px;">${scenarios[currentScenarioIndex].explanation}</div>
                    <div style="color: var(--gold); font-weight: bold;">Streak Bonus: ${gameState.streak}x üî•</div>
                `;
            } else {
                options[selected].classList.add('incorrect');
                options[correct].classList.add('correct');
                gameState.streak = 0;
                updateUI();
                
                document.getElementById('feedbackText').innerHTML = `
                    <div style="color: var(--danger); font-size: 24px; margin-bottom: 15px;">‚ùå Not Quite!</div>
                    <div>${scenarios[currentScenarioIndex].explanation}</div>
                    <div style="margin-top: 10px; opacity: 0.8;">Streak reset. Keep trying! üí™</div>
                `;
            }
            
            document.getElementById('feedbackBox').style.display = 'block';
        }

        function loadQuiz(index) {
            document.getElementById('gameArea').innerHTML = `
                <div class="challenge-active">
                    <h2>‚ö° Speed Quiz Mode</h2>
                    <p style="margin: 20px 0;">Quick-fire questions to test your AI literacy. Answer fast for bonus XP!</p>
                    <button class="btn-primary" onclick="alert('Quiz mode coming in next update!')">Start Quiz</button>
                    <button class="btn-primary" style="margin-left: 10px; background: gray;" onclick="backToMenu()">Back to Menu</button>
                </div>
            `;
        }

        function loadFACTS() {
            document.getElementById('gameArea').innerHTML = `
                <div class="challenge-active">
                    <h2>‚úÖ F.A.C.T.S. Framework Training</h2>
                    <div style="margin: 30px 0;">
                        <div style="padding: 25px; background: rgba(0,0,0,0.3); border-radius: 15px; margin-bottom: 20px; border-left: 4px solid var(--primary);">
                            <h3 style="margin-bottom: 15px;">üìç F - Find Sources</h3>
                            <p>Verify sources and check citations. Do they actually exist? Can you access them?</p>
                        </div>
                        <div style="padding: 25px; background: rgba(0,0,0,0.3); border-radius: 15px; margin-bottom: 20px; border-left: 4px solid var(--warning);">
                            <h3 style="margin-bottom: 15px;">‚ùì A - Ask Questions</h3>
                            <p>Challenge over-confident answers. Make AI explain its reasoning and show uncertainty.</p>
                        </div>
                        <div style="padding: 25px; background: rgba(0,0,0,0.3); border-radius: 15px; margin-bottom: 20px; border-left: 4px solid var(--success);">
                            <h3 style="margin-bottom: 15px;">ü§î C - Consider Gaps</h3>
                            <p>Look for missing details, gaps, or one-sided perspectives. What isn't being said?</p>
                        </div>
                        <div style="padding: 25px; background: rgba(0,0,0,0.3); border-radius: 15px; margin-bottom: 20px; border-left: 4px solid var(--secondary);">
                            <h3 style="margin-bottom: 15px;">üí¨ T - Try Uncertainty</h3>
                            <p>Encourage AI to say "I don't know" when appropriate instead of guessing.</p>
                        </div>
                        <div style="padding: 25px; background: rgba(0,0,0,0.3); border-radius: 15px; margin-bottom: 20px; border-left: 4px solid var(--danger);">
                            <h3 style="margin-bottom: 15px;">üíæ S - Save & Compare</h3>
                            <p>Record outputs and compare over time to spot inconsistencies or bias drift.</p>
                        </div>
                    </div>
                    <button class="btn-primary" onclick="addXP(75); backToMenu();">Complete Training (+75 XP)</button>
                </div>
            `;
        }

        function loadRealWorld() {
            document.getElementById('gameArea').innerHTML = `
                <div class="challenge-active">
                    <h2>üí• Real-World AI Disasters</h2>
                    <div style="margin: 30px 0;">
                        <div style="padding: 25px; background: rgba(239, 68, 68, 0.2); border-radius: 15px; margin-bottom: 20px; border: 2px solid var(--danger);">
                            <h3 style="margin-bottom: 15px;">‚öñÔ∏è The $5,000 Legal Brief (2023)</h3>
                            <p style="margin-bottom: 10px;"><strong>What Happened:</strong> Two NYC lawyers cited 6 fake cases from ChatGPT in court filings.</p>
                            <p style="margin-bottom: 10px;"><strong>The Damage:</strong> $5,000 fine + professional sanctions + global embarrassment</p>
                            <div class="pathology-tag">Citation Invention</div>
                            <div class="pathology-tag">Fabrication</div>
                        </div>
                        
                        <div style="padding: 25px; background: rgba(239, 68, 68, 0.2); border-radius: 15px; margin-bottom: 20px; border: 2px solid var(--danger);">
                            <h3 style="margin-bottom: 15px;">ü§ñ Microsoft Tay's Meltdown (2016)</h3>
                            <p style="margin-bottom: 10px;"><strong>What Happened:</strong> Twitter chatbot learned to post racist tweets from users in less than 24 hours.</p>
                            <p style="margin-bottom: 10px;"><strong>The Damage:</strong> Removed after <24h, massive PR disaster</p>
                            <div class="pathology-tag">Contagious Misalignment</div>
                            <div class="pathology-tag">Value Drift</div>
                        </div>
                        
                        <div style="padding: 25px; background: rgba(239, 68, 68, 0.2); border-radius: 15px; margin-bottom: 20px; border: 2px solid var(--danger);">
                            <h3 style="margin-bottom: 15px;">üìß Amazon Hiring AI Bias (2018)</h3>
                            <p style="margin-bottom: 10px;"><strong>What Happened:</strong> AI recruiting tool penalized resumes with "women's" or female colleges.</p>
                            <p style="margin-bottom: 10px;"><strong>The Damage:</strong> Project scrapped, systemic bias exposed</p>
                            <div class="pathology-tag">Hypernormalization Syndrome</div>
                            <div class="pathology-tag">Ethical Inconsistency</div>
                        </div>
                    </div>
                    <button class="btn-primary" onclick="addXP(150); backToMenu();">Complete Case Studies (+150 XP)</button>
                </div>
            `;
        }

        function showCompletion(mode) {
            document.getElementById('gameArea').innerHTML = `
                <div class="challenge-active">
                    <div style="text-align: center; padding: 40px;">
                        <div style="font-size: 64px; margin-bottom: 20px;">üéâ</div>
                        <h2 style="margin-bottom: 20px;">Congratulations!</h2>
                        <p style="font-size: 18px; margin-bottom: 30px;">You've completed all scenarios in this mode!</p>
                        <div style="padding: 20px; background: rgba(255, 215, 0, 0.2); border-radius: 15px; margin-bottom: 30px;">
                            <div style="font-size: 24px; font-weight: bold; color: var(--gold);">Total XP Earned: ${gameState.points}</div>
                            <div style="font-size: 18px; margin-top: 10px;">Current Level: ${gameState.level}</div>
                        </div>
                        <button class="btn-primary" onclick="backToMenu()">Back to Main Menu</button>
                    </div>
                </div>
            `;
        }

        function backToMenu() {
            document.getElementById('welcomeScreen').style.display = 'block';
            document.getElementById('gameArea').style.display = 'none';
            gameState.currentMode = null;
        }

        // Initialize
        updateUI();
    </script>
</body>
</html>
